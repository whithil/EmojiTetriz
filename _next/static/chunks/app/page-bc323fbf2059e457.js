(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6403:(e,t,a)=>{Promise.resolve().then(a.bind(a,8911))},8911:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eQ});var s=a(5155),r=a(2115),n=a(6874),l=a.n(n),i=a(8271),o=a(9708),c=a(2085),d=a(9434);let m=(0,c.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=r.forwardRef((e,t)=>{let{className:a,variant:r,size:n,asChild:l=!1,...i}=e,c=l?o.DX:"button";return(0,s.jsx)(c,{className:(0,d.cn)(m({variant:r,size:n,className:a})),ref:t,...i})});u.displayName="Button";var f=a(1858),x=a(7679),p=a(1992),h=a(3158),g=a(518),b=a(154);let v=p.bL,j=p.l9;p.YJ,p.ZL,p.Pb,p.z6,r.forwardRef((e,t)=>{let{className:a,inset:r,children:n,...l}=e;return(0,s.jsxs)(p.ZP,{ref:t,className:(0,d.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...l,children:[n,(0,s.jsx)(h.A,{className:"ml-auto"})]})}).displayName=p.ZP.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(p.G5,{ref:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=p.G5.displayName;let N=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...n}=e;return(0,s.jsx)(p.ZL,{children:(0,s.jsx)(p.UC,{ref:t,sideOffset:r,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});N.displayName=p.UC.displayName;let y=r.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(p.q7,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...n})});function w(){let{locale:e,setLocale:t,t:a}=(0,f.B)();return(0,s.jsxs)(v,{children:[(0,s.jsx)(j,{asChild:!0,children:(0,s.jsxs)(u,{variant:"outline",size:"icon",children:[(0,s.jsx)(x.A,{className:"h-[1.2rem] w-[1.2rem]"}),(0,s.jsx)("span",{className:"sr-only",children:a("language")})]})}),(0,s.jsxs)(N,{align:"end",children:[(0,s.jsx)(y,{onClick:()=>t("en-US"),disabled:"en-US"===e,children:"English"}),(0,s.jsx)(y,{onClick:()=>t("pt-BR"),disabled:"pt-BR"===e,children:"Portugu\xeas (BR)"}),(0,s.jsx)(y,{onClick:()=>t("es-ES"),disabled:"es-ES"===e,children:"Espa\xf1ol"}),(0,s.jsx)(y,{onClick:()=>t("fr-FR"),disabled:"fr-FR"===e,children:"Fran\xe7ais"}),(0,s.jsx)(y,{onClick:()=>t("de-DE"),disabled:"de-DE"===e,children:"Deutsch"})]})]})}y.displayName=p.q7.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,checked:n,...l}=e;return(0,s.jsxs)(p.H_,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(p.VF,{children:(0,s.jsx)(g.A,{className:"h-4 w-4"})})}),r]})}).displayName=p.H_.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(p.hN,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(p.VF,{children:(0,s.jsx)(b.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=p.hN.displayName,r.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(p.JU,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...n})}).displayName=p.JU.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(p.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=p.wv.displayName;var k=a(8027),C=a(6936),R=a(7740);function E(){let{theme:e,toggleTheme:t}=(0,R.w)(),{t:a}=(0,f.B)();return(0,s.jsx)(u,{variant:"outline",size:"icon",onClick:t,"aria-label":a("light"===e?"darkMode":"lightMode"),children:"light"===e?(0,s.jsx)(k.A,{className:"h-[1.2rem] w-[1.2rem]"}):(0,s.jsx)(C.A,{className:"h-[1.2rem] w-[1.2rem]"})})}var A=a(3607);function M(){let[e,t]=(0,r.useState)(void 0);return(0,r.useEffect)(()=>{let e=()=>{t(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),void 0!==e&&e}function L(e){let{onSettingsClick:t}=e,{t:a}=(0,f.B)(),{score:r,level:n,linesCleared:o,gameState:c}=(0,A.x)(),m=M();return(0,s.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,s.jsxs)("div",{className:"container flex h-16 items-center justify-between px-2 sm:px-4",children:[(0,s.jsx)(l(),{href:"/",className:"text-2xl font-bold text-primary ml-2 sm:ml-4 shrink-0",children:a("appName")}),m&&"gameOver"!==c&&(0,s.jsxs)("div",{className:"flex-1 flex justify-center items-center space-x-1.5 text-xs px-1 overflow-hidden mx-1",children:[(0,s.jsxs)("span",{className:"truncate text-foreground/80",children:[a("scoreAbbr"),": ",(0,s.jsx)("span",{className:"font-semibold text-primary",children:r})]}),(0,s.jsxs)("span",{className:"truncate text-foreground/80",children:[a("levelAbbr"),": ",(0,s.jsx)("span",{className:"font-semibold text-accent",children:n})]}),(0,s.jsxs)("span",{className:"truncate text-foreground/80",children:[a("linesAbbr"),": ",(0,s.jsx)("span",{className:"font-semibold text-accent",children:o})]})]}),!m&&(0,s.jsx)("div",{className:"flex-grow"}),(0,s.jsxs)("div",{className:(0,d.cn)("flex items-center shrink-0",m?"space-x-1":"space-x-2"),children:[(0,s.jsx)(E,{}),(0,s.jsx)(w,{}),(0,s.jsx)(u,{variant:"outline",size:"icon",onClick:t,"aria-label":a("settings"),className:(0,d.cn)(m?"w-9 h-9":""),children:(0,s.jsx)(i.A,{className:"h-[1.2rem] w-[1.2rem]"})})]})]})})}var z=a(828);function S(e){let{board:t,currentPiece:a,ghostPiece:r,animatingRows:n}=e,l=t.map(e=>[...e]);return r&&r.shape.forEach((e,t)=>{e.forEach((e,a)=>{if(0!==e){let e=r.y+t,s=r.x+a;e>=0&&e<z.pv&&s>=0&&s<z.yi&&!l[e][s]&&(l[e][s]={emoji:r.emoji,type:r.type,id:r.id})}})}),a&&a.shape.forEach((e,t)=>{e.forEach((e,s)=>{if(0!==e){let e=a.y+t,r=a.x+s;e>=0&&e<z.pv&&r>=0&&r<z.yi&&(l[e][r]={emoji:a.emoji,type:a.type,id:a.id})}})}),(0,s.jsx)("div",{className:"grid bg-card shadow-lg rounded-lg p-1 md:p-2 relative",style:{gridTemplateColumns:"repeat(".concat(z.yi,", 1fr)"),gridTemplateRows:"repeat(".concat(z.pv,", 1fr)"),aspectRatio:"".concat(z.yi," / ").concat(z.pv),maxHeight:"calc(90vh - 160px)",maxWidth:"calc((90vh - 160px) * (".concat(z.yi," / ").concat(z.pv,"))"),margin:"0 auto"},role:"grid","aria-label":"Tetris game board",children:l.map((e,t)=>e.map((e,l)=>(0,s.jsx)("div",{className:(0,d.cn)("tetris-board-cell",e?"filled":"empty",r&&r.shape.some((e,a)=>e.some((e,s)=>0!==e&&r.y+a===t&&r.x+s===l))&&!(a&&a.shape.some((e,s)=>e.some((e,r)=>0!==e&&a.y+s===t&&a.x+r===l)))?"ghost-piece":"",e&&n.includes(t)&&"line-clearing"),role:"gridcell","aria-label":e?"Cell ".concat(l+1,", ").concat(t+1," filled with ").concat(e.type," piece"):"Cell ".concat(l+1,", ").concat(t+1," empty"),children:e?e.emoji:""},"".concat(t,"-").concat(l))))})}function D(e){let{piece:t,title:a}=e,r=Array.from({length:4},()=>[,,,,].fill(null));if(t){var n;let e=t.shape.length,a=(null===(n=t.shape[0])||void 0===n?void 0:n.length)||0,s=Math.floor((4-e)/2),l=Math.floor((4-a)/2);t.shape.forEach((e,a)=>{e.forEach((e,n)=>{0!==e&&s+a<4&&l+n<4&&(r[s+a][l+n]=t.emoji)})})}return(0,s.jsxs)("div",{className:"bg-card p-4 rounded-lg shadow-md text-center",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2 text-foreground",children:a}),(0,s.jsx)("div",{className:"grid m-auto",style:{gridTemplateColumns:"repeat(".concat(4,", 1fr)"),width:"6rem",height:"6rem"},children:r.map((e,t)=>e.map((e,a)=>(0,s.jsx)("div",{className:(0,d.cn)("w-full h-full flex items-center justify-center text-xl",e?"border border-foreground/10":"bg-background/30 border border-transparent"),children:e},"".concat(t,"-").concat(a))))})]})}function T(e){let{piece:t,title:a,onHoldActionTrigger:r,isMobile:n,canHold:l,gameState:i}=e,o=Array.from({length:4},()=>[,,,,].fill(null));if(t){var c;let e=t.shape.length,a=(null===(c=t.shape[0])||void 0===c?void 0:c.length)||0,s=Math.floor((4-e)/2),r=Math.floor((4-a)/2);t.shape.forEach((e,a)=>{e.forEach((e,n)=>{0!==e&&s+a<4&&r+n<4&&(o[s+a][r+n]=t.emoji)})})}return(0,s.jsxs)("div",{className:(0,d.cn)("bg-card p-4 rounded-lg shadow-md text-center",n&&l&&"playing"===i?"cursor-pointer hover:bg-card/90 active:bg-card/80":""),onClick:()=>{n&&r&&l&&"playing"===i&&r()},role:n&&l&&"playing"===i?"button":void 0,tabIndex:n&&l&&"playing"===i?0:void 0,"aria-label":n&&l&&"playing"===i?a:void 0,children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2 text-foreground",children:a}),(0,s.jsx)("div",{className:"grid m-auto pointer-events-none",style:{gridTemplateColumns:"repeat(".concat(4,", 1fr)"),width:"6rem",height:"6rem"},"aria-hidden":"true",children:o.map((e,t)=>e.map((e,a)=>(0,s.jsx)("div",{className:(0,d.cn)("w-full h-full flex items-center justify-center text-xl",e?"border border-foreground/10":"bg-background/30 border border-transparent"),children:e},"".concat(t,"-").concat(a,"-held"))))})]})}let B=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});B.displayName="Card";let F=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...r})});F.displayName="CardHeader";let P=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});P.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",a),...r})}).displayName="CardDescription";let O=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,d.cn)("p-6 pt-0",a),...r})});function U(e){let{score:t,level:a,linesCleared:r}=e,{t:n}=(0,f.B)();return(0,s.jsx)(B,{className:"shadow-md",children:(0,s.jsxs)(O,{className:"p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:n("score")}),(0,s.jsx)("p",{className:"text-3xl font-bold text-primary",children:t})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:n("level")}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-accent",children:a})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:n("lines")}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-accent",children:r})]})]})})}O.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,d.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter";var _=a(3300),H=a(3764),q=a(5078),V=a(8531),Y=a(5030),I=a(2543),W=a(9829),Z=a(9968),J=a(3926);function G(){let{gameState:e,startGame:t,pauseGame:a,resumeGame:n,moveLeft:l,moveRight:i,rotatePiece:o,softDrop:c,hardDrop:d,holdPiece:m,canHold:x,keyboardMappings:p,gamepadMappings:h}=(0,A.x)(),{t:g}=(0,f.B)(),b=(0,r.useRef)([]),v=(0,r.useRef)(null),j=(0,r.useRef)(0),N=(0,r.useRef)(0),y=(0,r.useCallback)(s=>{switch(s){case"moveLeft":l();break;case"moveRight":i();break;case"softDrop":c();break;case"hardDrop":d();break;case"rotateCW":o("cw");break;case"rotateCCW":o("ccw");break;case"holdPiece":x&&m();break;case"pauseResume":"gameOver"===e?t():"playing"===e?a():"paused"===e&&n()}},[e,l,i,c,d,o,m,x,a,n,t]),w=e=>{for(let t in p)if(p[t]===e)return t;return null},k=e=>{for(let t in h)if(h[t]===e)return t;return null};return(0,r.useEffect)(()=>{let t=t=>{if("gameOver"===e&&t.key.toLowerCase()!==p.pauseResume){let e=w(t.key.toLowerCase());"pauseResume"===e&&y(e);return}if(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement)return;let a=w(t.key.toLowerCase());a&&(("hardDrop"===a||"pauseResume"===a)&&t.preventDefault(),y(a))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,y,p]),(0,r.useEffect)(()=>{let e=e=>{null===v.current&&(v.current=e.gamepad.index,b.current=Array(e.gamepad.buttons.length).fill(!1))},t=e=>{v.current===e.gamepad.index&&(v.current=null,b.current=[])};for(let a of(window.addEventListener("gamepadconnected",e),window.addEventListener("gamepaddisconnected",t),navigator.getGamepads()))if(a){e({gamepad:a});break}return()=>{window.removeEventListener("gamepadconnected",e),window.removeEventListener("gamepaddisconnected",t)}},[]),(0,r.useEffect)(()=>{let t;if(null===v.current)return;let a=s=>{if(null===v.current){t=requestAnimationFrame(a);return}let r=navigator.getGamepads()[v.current];if(!r){t=requestAnimationFrame(a);return}let n=r.buttons.map(e=>e.pressed),l=r.axes,i=k(h.pauseResume);if(i&&void 0!==h.pauseResume&&n[h.pauseResume]&&!b.current[h.pauseResume]&&y(i),"playing"===e){let e=e=>{let t=performance.now();0===N.current?(y(e),j.current=t,N.current=t):t-N.current>200&&t-j.current>120&&(y(e),j.current=t)},t=k(h.moveLeft),a=k(h.moveRight),s=k(h.softDrop),r=t&&void 0!==h.moveLeft&&n[h.moveLeft],i=a&&void 0!==h.moveRight&&n[h.moveRight],o=s&&void 0!==h.softDrop&&n[h.softDrop],c=l[z.RP]<-z.kR,d=l[z.RP]>z.kR,m=l[z.xm]>z.kR;(r||c)&&t?e(t):(i||d)&&a&&e(a),(o||m)&&s&&e(s),r||c||i||d||o||m||(N.current=0),n.forEach((e,t)=>{if(e&&!b.current[t]){let e=k(t);e&&"moveLeft"!==e&&"moveRight"!==e&&"softDrop"!==e&&"pauseResume"!==e&&y(e)}})}else if("gameOver"===e){let e=k(h.pauseResume);e&&void 0!==h.pauseResume&&n[h.pauseResume]&&!b.current[h.pauseResume]&&y(e)}b.current=n,t=requestAnimationFrame(a)};return t=requestAnimationFrame(a),()=>cancelAnimationFrame(t)},[e,y,h]),(0,s.jsxs)("div",{className:"space-y-3 mt-4",children:[(0,s.jsxs)(u,{onClick:()=>{y("pauseResume")},className:"w-full text-lg py-6 bg-primary hover:bg-primary/90",children:["gameOver"===e?(0,s.jsx)(_.A,{className:"mr-2 h-6 w-6"}):"playing"===e?(0,s.jsx)(H.A,{className:"mr-2 h-6 w-6"}):(0,s.jsx)(_.A,{className:"mr-2 h-6 w-6"}),g("gameOver"===e?"play":"playing"===e?"pause":"resume")]}),"gameOver"!==e&&(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,s.jsx)(u,{variant:"outline",onClick:()=>y("rotateCW"),disabled:"playing"!==e,"aria-label":g("rotateCW"),className:"py-5",children:(0,s.jsx)(q.A,{className:"h-6 w-6"})}),(0,s.jsx)(u,{variant:"outline",onClick:()=>y("rotateCCW"),disabled:"playing"!==e,"aria-label":g("rotateCCW"),className:"py-5",children:(0,s.jsx)(V.A,{className:"h-6 w-6"})}),(0,s.jsxs)(u,{variant:"outline",onClick:()=>y("holdPiece"),disabled:!x||"playing"!==e,"aria-label":g("holdButton"),className:"py-5 col-span-1",children:[(0,s.jsx)(Y.A,{className:"mr-1 h-6 w-6"})," ",g("holdButton")]}),(0,s.jsx)(u,{variant:"outline",onClick:()=>y("moveLeft"),disabled:"playing"!==e,"aria-label":g("moveLeft"),className:"py-5",children:(0,s.jsx)(I.A,{className:"h-6 w-6"})}),(0,s.jsx)(u,{variant:"outline",onClick:()=>y("hardDrop"),disabled:"playing"!==e,"aria-label":g("hardDrop"),className:"py-5",children:(0,s.jsx)(W.A,{className:"h-6 w-6"})}),(0,s.jsx)(u,{variant:"outline",onClick:()=>y("moveRight"),disabled:"playing"!==e,"aria-label":g("moveRight"),className:"py-5",children:(0,s.jsx)(Z.A,{className:"h-6 w-6"})}),(0,s.jsx)("div",{className:"col-start-2 flex justify-center",children:(0,s.jsx)(u,{variant:"outline",onClick:()=>y("softDrop"),disabled:"playing"!==e,"aria-label":g("moveDown"),className:"py-5 w-full",children:(0,s.jsx)(J.A,{className:"h-6 w-6"})})})]})]})}var X=a(1314);function K(){let{gameState:e,pauseGame:t,resumeGame:a,moveLeft:n,moveRight:l,rotatePiece:i,softDrop:o,hardDrop:c,holdPiece:d,canHold:m}=(0,A.x)(),{t:x}=(0,f.B)(),p=(0,r.useRef)(null),h=(0,r.useRef)(null),g=(0,r.useRef)(0),b=(0,r.useRef)(0),v=(0,r.useRef)(null),j=(0,r.useRef)(null),N=(0,r.useRef)(null),y=(0,r.useCallback)(t=>{if("playing"!==e||0===t.touches.length)return;let a=t.touches[0];p.current={x:a.clientX,y:a.clientY,time:Date.now()},g.current=0,b.current=0,v.current=a.clientX,j.current=a.clientY,N.current=null},[e]),w=(0,r.useCallback)(t=>{if("playing"!==e||!p.current||0===t.touches.length)return;let a=t.touches[0],s=a.clientX,r=a.clientY,i=s-p.current.x,c=r-p.current.y;if(!N.current&&(Math.abs(i)>20||Math.abs(c)>20)&&(Math.abs(i)>1.2*Math.abs(c)?N.current="horizontal":Math.abs(c)>1.2*Math.abs(i)&&(N.current="vertical")),"horizontal"===N.current&&v.current){let e=s-v.current;for(g.current+=e;g.current>=40;)l(),g.current-=40;for(;g.current<=-40;)n(),g.current+=40}else if("vertical"===N.current&&j.current){let e=r-j.current;e>0&&(b.current+=e,b.current>=30&&(o(),b.current=0))}v.current=s,j.current=r},[e,n,l,o]),k=(0,r.useCallback)(t=>{if("playing"!==e||!p.current||0===t.changedTouches.length)return;let a=t.changedTouches[0],{x:s,y:r,time:n}=p.current,l=a.clientX,d=a.clientY,m=Date.now(),u=d-r,f=m-n,x=Math.abs(l-s),y=Math.abs(u);if("vertical"===N.current)u<-40?c():u>40&&b.current<30&&f<450&&o();else if("horizontal"!==N.current&&f<300&&x<20&&y<20){var w;let e=null===(w=h.current)||void 0===w?void 0:w.getBoundingClientRect();e&&(l-e.left<e.width/2?i("ccw"):i("cw"))}p.current=null,v.current=null,j.current=null,g.current=0,b.current=0,N.current=null},[e,c,o,i]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{ref:h,className:"absolute inset-0 z-20",style:{touchAction:"none"},onTouchStart:y,onTouchMove:w,onTouchEnd:k}),(0,s.jsx)("div",{className:"absolute top-3 right-3 z-30",children:(0,s.jsx)(u,{variant:"ghost",size:"icon",onClick:()=>{"playing"===e?t():"paused"===e&&a()},className:"bg-black/50 hover:bg-black/70 text-white rounded-full w-14 h-14 shadow-xl","aria-label":x("playing"===e?"pause":"resume"),children:"playing"===e?(0,s.jsx)(H.A,{className:"w-7 h-7"}):(0,s.jsx)(_.A,{className:"w-7 h-7"})})}),(0,s.jsx)("div",{className:"absolute top-3 left-3 z-30",children:(0,s.jsx)(u,{variant:"ghost",size:"icon",onClick:()=>{m&&"playing"===e&&d()},disabled:!m||"playing"!==e,className:"bg-black/50 hover:bg-black/70 text-white rounded-full w-14 h-14 shadow-xl disabled:opacity-60","aria-label":x("holdButton"),children:(0,s.jsx)(X.A,{className:"w-7 h-7"})})})]})}var Q=a(7554);function $(){let{gameState:e,score:t,startGame:a}=(0,A.x)(),{t:r}=(0,f.B)();return"gameOver"!==e?null:(0,s.jsx)("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm z-10 rounded-lg",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full w-full",children:[(0,s.jsx)("h2",{className:"text-5xl font-bold text-primary mb-4 animate-bounce",children:r("gameOver")}),(0,s.jsxs)("p",{className:"text-2xl text-foreground mb-2",children:[r("score"),": ",(0,s.jsx)("span",{className:"font-bold text-accent",children:t})]}),(0,s.jsxs)(u,{onClick:a,size:"lg",className:"text-lg py-3 px-6 mt-4",children:[(0,s.jsx)(Q.A,{className:"mr-2 h-5 w-5"}),r("restart")]})]})})}var ee=a(5452),et=a(5318);let ea=ee.bL;ee.l9;let es=ee.ZL,er=ee.bm,en=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(ee.hJ,{ref:t,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});en.displayName=ee.hJ.displayName;let el=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(es,{children:[(0,s.jsx)(en,{}),(0,s.jsxs)(ee.UC,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[r,(0,s.jsxs)(ee.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(et.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});el.displayName=ee.UC.displayName;let ei=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};ei.displayName="DialogHeader";let eo=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};eo.displayName="DialogFooter";let ec=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(ee.hE,{ref:t,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});ec.displayName=ee.hE.displayName;let ed=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(ee.VY,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",a),...r})});ed.displayName=ee.VY.displayName;var em=a(704);let eu=em.bL,ef=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(em.B8,{ref:t,className:(0,d.cn)("inline-flex items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});ef.displayName=em.B8.displayName;let ex=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(em.l9,{ref:t,className:(0,d.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});ex.displayName=em.l9.displayName;let ep=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(em.UC,{ref:t,className:(0,d.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});ep.displayName=em.UC.displayName;let eh=r.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:(0,d.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});eh.displayName="Input";var eg=a(968);let eb=(0,c.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ev=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eg.b,{ref:t,className:(0,d.cn)(eb(),a),...r})});ev.displayName=eg.b.displayName;var ej=a(7481);function eN(){let{emojiSet:e,setEmojiSet:t}=(0,A.x)(),{t:a}=(0,f.B)(),[n,l]=(0,r.useState)(e),{toast:i}=(0,ej.dj)();(0,r.useEffect)(()=>{l(e)},[e]);let o=(e,t)=>{let a=t.target.value.slice(0,2);l(t=>({...t,[e]:a}))};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-foreground",children:a("emojiSettings")}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[" ",z.EK.map(e=>(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(ev,{htmlFor:"emoji-".concat(e),className:"text-muted-foreground",children:a("selectEmojiForPiece",{pieceName:a("piece".concat(e))||e})}),(0,s.jsx)(eh,{id:"emoji-".concat(e),type:"text",value:n[e]||"",onChange:t=>o(e,t),maxLength:2,className:"text-2xl p-2 h-12 w-20 text-center"})]},e))]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(u,{onClick:()=>{t(n),i({title:a("emojisSaved"),description:"Your new emoji theme is active."})},className:"bg-primary hover:bg-primary/90",children:a("saveEmojis")}),(0,s.jsx)(u,{variant:"outline",onClick:()=>{l(z.IP),t(z.IP),i({title:"Emojis Reset",description:"Emojis have been reset to default."})},children:"Reset to Default"})]})]})}function ey(){let{keyboardMappings:e,gamepadMappings:t,updateKeyboardMapping:a,updateGamepadMapping:n,resetControlMappings:l}=(0,A.x)(),{t:i}=(0,f.B)(),{toast:o}=(0,ej.dj)(),[c,d]=(0,r.useState)(null),m=(e,t)=>{d({type:e,action:t}),o({title:i("listeningForInputTitle"),description:i("listeningForInputDescription",{action:i("action".concat(t.charAt(0).toUpperCase()+t.slice(1)))||t})})};return(0,r.useEffect)(()=>{if(!c)return;let e=e=>{"keyboard"===c.type&&(e.preventDefault(),e.stopPropagation(),a(c.action,e.key),o({title:i("mappingUpdatedTitle"),description:"".concat(i("action".concat(c.action.charAt(0).toUpperCase()+c.action.slice(1)))," ").concat(i("mappedTo")," ").concat((0,z.lx)(e.key))}),d(null))},t=null;return"keyboard"===c.type?document.addEventListener("keydown",e,{capture:!0}):"gamepad"===c.type&&(t=setInterval(()=>{if("gamepad"===c.type){for(let e of navigator.getGamepads())if(e){for(let t=0;t<e.buttons.length;t++)if(e.buttons[t].pressed){n(c.action,t),o({title:i("mappingUpdatedTitle"),description:"".concat(i("action".concat(c.action.charAt(0).toUpperCase()+c.action.slice(1)))," ").concat(i("mappedTo")," ").concat((0,z.LM)(t))}),d(null);return}}}},100)),()=>{"keyboard"===c.type&&document.removeEventListener("keydown",e,{capture:!0}),t&&clearInterval(t)}},[c,a,n,o,i]),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-foreground",children:i("controlSettings")}),(0,s.jsx)(u,{variant:"outline",onClick:()=>{l(),o({title:i("controlsResetTitle"),description:i("controlsResetDescription")})},children:i("resetToDefault")})]}),z.vM.map(a=>(0,s.jsxs)(B,{className:"overflow-hidden",children:[(0,s.jsx)(F,{className:"bg-muted/50 p-4",children:(0,s.jsx)(P,{className:"text-lg",children:i("action".concat(a.charAt(0).toUpperCase()+a.slice(1)))||a})}),(0,s.jsxs)(O,{className:"p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(ev,{htmlFor:"kb-".concat(a),className:"text-muted-foreground",children:i("keyboard")}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium w-28 text-right pr-2 border-r",children:e[a]?(0,z.lx)(e[a]):i("unassigned")}),(0,s.jsx)(u,{id:"kb-".concat(a),variant:"outline",size:"sm",onClick:()=>m("keyboard",a),disabled:(null==c?void 0:c.action)===a&&(null==c?void 0:c.type)==="keyboard",children:(null==c?void 0:c.action)===a&&(null==c?void 0:c.type)==="keyboard"?i("listening"):i("change")})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(ev,{htmlFor:"gp-".concat(a),className:"text-muted-foreground",children:i("gamepad")}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium w-28 text-right pr-2 border-r",children:void 0!==t[a]?(0,z.LM)(t[a]):i("unassigned")}),(0,s.jsx)(u,{id:"gp-".concat(a),variant:"outline",size:"sm",onClick:()=>m("gamepad",a),disabled:(null==c?void 0:c.action)===a&&(null==c?void 0:c.type)==="gamepad",children:(null==c?void 0:c.action)===a&&(null==c?void 0:c.type)==="gamepad"?i("listening"):i("change")})]})]})]})]},a)),c&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>d(null),children:(0,s.jsxs)(B,{className:"p-6",children:[(0,s.jsx)(P,{children:i("pressKeyOrButtonTitle")}),(0,s.jsxs)("p",{className:"text-muted-foreground mt-2",children:["keyboard"===c.type?i("pressKeyPrompt"):i("pressButtonPrompt"),i("action".concat(c.action.charAt(0).toUpperCase()+c.action.slice(1))),"."]}),(0,s.jsx)(u,{variant:"ghost",className:"mt-4",onClick:()=>d(null),children:i("cancel")})]})})]})}let ew=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});ew.displayName="Textarea";var ek=a(8354),eC=a(7805),eR=a(5599);function eE(){let{emojiSet:e,setEmojiSet:t,customMinoesData:a,_setCustomMinoesBatch:n}=(0,A.x)(),{t:l}=(0,f.B)(),[i,o]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),{toast:m}=(0,ej.dj)(),[x,p]=(0,r.useState)(!1);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-foreground",children:l("themeSharing")}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:l("themeSharingDescription")}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(u,{onClick:()=>{let t=(0,ek.S)({emojiSet:e,customMinoesData:a});{let e=new URL(window.location.href);e.searchParams.set("theme",t),o(e.toString())}},className:"bg-accent hover:bg-accent/90",children:[(0,s.jsx)(eC.A,{className:"mr-2"})," ",l("generateShareLink")]}),i&&(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(ew,{readOnly:!0,value:i,className:"min-h-[80px] pr-12","aria-label":"Shareable data link"}),(0,s.jsx)(u,{variant:"ghost",size:"icon",onClick:()=>{i&&navigator.clipboard.writeText(i).then(()=>{p(!0),m({title:l("themeCopied")}),setTimeout(()=>p(!1),2e3)})},className:"absolute right-2 top-1/2 -translate-y-1/2","aria-label":"Copy shareable data link",children:x?(0,s.jsx)(g.A,{className:"h-5 w-5 text-green-500"}):(0,s.jsx)(eR.A,{className:"h-5 w-5"})})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(ev,{htmlFor:"theme-input",className:"text-muted-foreground",children:l("pasteShareStringOrLink")}),(0,s.jsx)(ew,{id:"theme-input",value:c,onChange:e=>d(e.target.value),placeholder:l("pasteThemePlaceholder"),className:"min-h-[80px]"}),(0,s.jsx)(u,{onClick:()=>{let e=c;try{let t=new URL(c).searchParams.get("theme");t&&(e=t)}catch(e){}let a=(0,ek.i)(e);a?(t(a.emojiSet),a.customMinoesData&&n(a.customMinoesData),m({title:l("themeAndMinoesApplied"),description:l("themeAndMinoesAppliedDesc")}),d(""),o("")):m({title:"Error",description:l("invalidThemeString"),variant:"destructive"})},disabled:!c,className:"bg-primary hover:bg-primary/90",children:l("applyTheme")})]})]})}var eA=a(239);let eM=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eA.bL,{className:(0,d.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input dark:data-[state=unchecked]:bg-[hsl(var(--switch-unchecked-background-dark))]",a),...r,ref:t,children:(0,s.jsx)(eA.zi,{className:(0,d.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});eM.displayName=eA.bL.displayName;var eL=a(9051);let ez=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(eL.bL,{ref:t,className:(0,d.cn)("relative overflow-hidden",a),...n,children:[(0,s.jsx)(eL.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,s.jsx)(eS,{}),(0,s.jsx)(eL.OK,{})]})});ez.displayName=eL.bL.displayName;let eS=r.forwardRef((e,t)=>{let{className:a,orientation:r="vertical",...n}=e;return(0,s.jsx)(eL.VM,{ref:t,orientation:r,className:(0,d.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...n,children:(0,s.jsx)(eL.lr,{className:"relative flex-1 rounded-full bg-border"})})});eS.displayName=eL.VM.displayName;var eD=a(7649);let eT=eD.bL,eB=eD.l9,eF=eD.ZL,eP=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eD.hJ,{className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});eP.displayName=eD.hJ.displayName;let eO=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsxs)(eF,{children:[(0,s.jsx)(eP,{}),(0,s.jsx)(eD.UC,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]})});eO.displayName=eD.UC.displayName;let eU=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};eU.displayName="AlertDialogHeader";let e_=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};e_.displayName="AlertDialogFooter";let eH=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eD.hE,{ref:t,className:(0,d.cn)("text-lg font-semibold",a),...r})});eH.displayName=eD.hE.displayName;let eq=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eD.VY,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",a),...r})});eq.displayName=eD.VY.displayName;let eV=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eD.rc,{ref:t,className:(0,d.cn)(m(),a),...r})});eV.displayName=eD.rc.displayName;let eY=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eD.ZD,{ref:t,className:(0,d.cn)(m({variant:"outline"}),"mt-2 sm:mt-0",a),...r})});eY.displayName=eD.ZD.displayName;var eI=a(7223);let eW=()=>Array(z.fb).fill(null).map(()=>Array(z.fb).fill(0));function eZ(e){let{isOpen:t,onClose:a}=e,{t:n}=(0,f.B)(),{customMinoesData:l,addCustomMino:i,removeCustomMino:o}=(0,A.x)(),{toast:c}=(0,ej.dj)(),[m,x]=(0,r.useState)(""),[p,h]=(0,r.useState)(""),[g,b]=(0,r.useState)(eW()),v=(e,t)=>{b(a=>a.map((a,s)=>s===e?a.map((e,a)=>a===t?+(0===e):e):a))};return(0,s.jsx)(ea,{open:t,onOpenChange:a,children:(0,s.jsxs)(el,{className:"sm:max-w-[700px] max-h-[85vh] flex flex-col",children:[(0,s.jsxs)(ei,{children:[(0,s.jsx)(ec,{children:n("manageCustomMinoesTitle")}),(0,s.jsx)(ed,{children:n("customMinoesModalDescription")})]}),(0,s.jsx)(ez,{className:"flex-grow pr-6",children:(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 py-4",children:[(0,s.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg shadow",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:n("addCustomMinoTitle")}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ev,{htmlFor:"mino-name",children:n("minoNameLabel")}),(0,s.jsx)(eh,{id:"mino-name",value:m,onChange:e=>x(e.target.value),placeholder:n("minoNamePlaceholder")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ev,{htmlFor:"mino-emoji",children:n("minoEmojiLabel")}),(0,s.jsx)(eh,{id:"mino-emoji",value:p,onChange:e=>h(e.target.value.slice(0,2)),placeholder:n("minoEmojiPlaceholder"),maxLength:2,className:"w-20 text-center text-xl"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ev,{children:n("minoShapeLabel")}),(0,s.jsx)("div",{className:"grid gap-0.5 mt-1 bg-muted p-1 rounded",style:{gridTemplateColumns:"repeat(".concat(z.fb,", 1fr)"),width:"10rem",height:"10rem"},children:g.map((e,t)=>e.map((e,a)=>(0,s.jsx)("button",{onClick:()=>v(t,a),className:(0,d.cn)("w-full h-full border border-background aspect-square focus:outline-none focus:ring-1 focus:ring-primary",1===e?"bg-primary":"bg-background/50 hover:bg-primary/30"),"aria-label":"Cell ".concat(t+1,", ").concat(a+1," - ").concat(1===e?"Selected":"Not selected")},"".concat(t,"-").concat(a))))})]}),(0,s.jsx)(u,{onClick:()=>{if(!m.trim()){c({title:n("errorMinoNameRequired"),variant:"destructive"});return}if(!p.trim()||p.length>2){c({title:n("errorMinoEmojiRequired"),variant:"destructive"});return}if(g.every(e=>e.every(e=>0===e))){c({title:n("errorMinoShapeRequired"),variant:"destructive"});return}i({name:m,emoji:p,shape:g}),x(""),h(""),b(eW())},className:"w-full bg-accent hover:bg-accent/90",children:n("saveMinoButton")})]}),(0,s.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg shadow",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:n("customMinoListTitle")}),0===l.length?(0,s.jsx)("p",{className:"text-muted-foreground",children:n("noCustomMinoes")}):(0,s.jsx)("ul",{className:"space-y-3 max-h-[40vh] overflow-y-auto pr-2",children:l.map(e=>(0,s.jsxs)("li",{className:"flex items-center justify-between p-3 bg-card rounded-md shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"grid gap-px bg-muted/50 p-0.5 rounded",style:{gridTemplateColumns:"repeat(".concat(z.fb,", 1fr)"),width:"2.5rem",height:"2.5rem"},children:e.shape.map((t,a)=>t.map((t,r)=>(0,s.jsx)("div",{className:(0,d.cn)("w-full h-full",1===t?"bg-primary":"bg-background/20")},"preview-".concat(e.id,"-").concat(a,"-").concat(r))))}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-2xl leading-none",children:e.emoji}),(0,s.jsx)("span",{className:"font-medium text-foreground",children:e.name})]})]}),(0,s.jsxs)(eT,{children:[(0,s.jsx)(eB,{asChild:!0,children:(0,s.jsx)(u,{variant:"ghost",size:"icon",className:"text-destructive hover:bg-destructive/10",children:(0,s.jsx)(eI.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(eO,{children:[(0,s.jsxs)(eU,{children:[(0,s.jsx)(eH,{children:n("confirmDeleteMinoTitle")}),(0,s.jsx)(eq,{children:n("confirmDeleteMinoDescription",{name:e.name})})]}),(0,s.jsxs)(e_,{children:[(0,s.jsx)(eY,{children:n("cancel")}),(0,s.jsx)(eV,{onClick:()=>o(e.id),className:"bg-destructive hover:bg-destructive/90",children:n("deleteMinoButton")})]})]})]})]},e.id))})]})]})}),(0,s.jsx)(eo,{className:"mt-auto pt-4 border-t",children:(0,s.jsx)(er,{asChild:!0,children:(0,s.jsx)(u,{type:"button",variant:"outline",children:n("close")})})})]})})}function eJ(){let{confettiOnLineClearEnabled:e,setConfettiOnLineClearEnabled:t,confettiOnLevelUpEnabled:a,setConfettiOnLevelUpEnabled:n,customMinoesEnabled:l,setCustomMinoesEnabled:i}=(0,A.x)(),{t:o}=(0,f.B)(),[c,d]=(0,r.useState)(!1);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-foreground",children:o("funBoxSettings")}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,s.jsx)(ev,{htmlFor:"confetti-line-clear-toggle",className:"text-base",children:o("confettiOnLineClear")}),(0,s.jsx)(eM,{id:"confetti-line-clear-toggle",checked:e,onCheckedChange:t,"aria-label":o("confettiOnLineClear")})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,s.jsx)(ev,{htmlFor:"confetti-level-up-toggle",className:"text-base",children:o("confettiOnLevelUp")}),(0,s.jsx)(eM,{id:"confetti-level-up-toggle",checked:a,onCheckedChange:n,"aria-label":o("confettiOnLevelUp")})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,s.jsx)(ev,{htmlFor:"custom-minoes-toggle",className:"text-base",children:o("enableCustomMinoes")}),(0,s.jsx)(eM,{id:"custom-minoes-toggle",checked:l,onCheckedChange:i,"aria-label":o("enableCustomMinoes")})]}),(0,s.jsx)(u,{onClick:()=>d(!0),disabled:!l,variant:"outline",className:"w-full",children:o("manageCustomMinoes")})]}),(0,s.jsx)(eZ,{isOpen:c,onClose:()=>d(!1)}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:o("funBoxDescription")})]})}function eG(e){let{isOpen:t,onClose:a}=e,{t:r}=(0,f.B)();return(0,s.jsx)(ea,{open:t,onOpenChange:a,children:(0,s.jsxs)(el,{className:"sm:max-w-[600px] max-h-[80vh] flex flex-col",children:[(0,s.jsxs)(ei,{children:[(0,s.jsx)(ec,{className:"text-2xl",children:r("settings")}),(0,s.jsxs)(ed,{children:[r("appName")," - ",r("settingsDescription")]})]}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto pr-2 py-4",children:(0,s.jsxs)(eu,{defaultValue:"emoji-settings",className:"w-full",children:[(0,s.jsxs)(ef,{className:"grid w-full grid-cols-2 sm:grid-cols-4",children:[" ",(0,s.jsx)(ex,{value:"emoji-settings",children:r("emojiSettings")}),(0,s.jsx)(ex,{value:"control-settings",children:r("controlSettings")}),(0,s.jsx)(ex,{value:"theme-sharing",children:r("themeSharing")}),(0,s.jsx)(ex,{value:"fun-box",children:r("funBox")})," "]}),(0,s.jsx)(ep,{value:"emoji-settings",className:"mt-4",children:(0,s.jsx)(eN,{})}),(0,s.jsx)(ep,{value:"control-settings",className:"mt-4",children:(0,s.jsx)(ey,{})}),(0,s.jsx)(ep,{value:"theme-sharing",className:"mt-4",children:(0,s.jsx)(eE,{})}),(0,s.jsxs)(ep,{value:"fun-box",className:"mt-4",children:[" ",(0,s.jsx)(eJ,{})]})]})}),(0,s.jsx)(er,{asChild:!0,children:(0,s.jsx)(u,{type:"button",variant:"outline",className:"mt-4 self-end",children:r("close")})}),(0,s.jsx)("button",{onClick:a,className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground","aria-label":r("closeSettings"),children:(0,s.jsx)(et.A,{className:"h-4 w-4"})})]})})}let eX=["hsl(var(--primary))","hsl(var(--accent))","#FFD700","#FF69B4","#00CED1"];function eK(e){let{animationType:t}=e,[a,n]=(0,r.useState)([]);return((0,r.useEffect)(()=>{let e=[];for(let a=0;a<50;a++){let s="50vw",r="50vh",n="".concat(150*Math.random()-75,"vw"),l="".concat(150*Math.random()-75,"vh"),i="".concat(.1*Math.random(),"s");"levelUp"===t&&(s="".concat(100*Math.random(),"vw"),r="-10vh",i="".concat(.4*Math.random(),"s")),e.push({id:a,color:eX[Math.floor(Math.random()*eX.length)],style:{left:s,top:r,transform:"rotate(".concat(360*Math.random(),"deg) scale(").concat(.5*Math.random()+.5,")"),animationDelay:i,"--confetti-end-x":n,"--confetti-end-y":l,"--confetti-start-x":"0%","--confetti-start-y":"0%"}})}n(e)},[t]),0===a.length)?null:(0,s.jsxs)("div",{className:"pointer-events-none fixed inset-0 z-[60] overflow-hidden",children:[" ",a.map(e=>(0,s.jsx)("div",{className:"confetti-piece","data-animation-type":t,style:{...e.style,backgroundColor:e.color}},e.id))]})}function eQ(){let{board:e,currentPiece:t,nextPiece:a,ghostPiece:n,heldPiece:l,canHold:i,score:o,level:c,linesCleared:m,gameState:x,startGame:p,pauseGame:h,resumeGame:g,holdPiece:b,showLineClearConfetti:v,showLevelUpConfetti:j,animatingRows:N}=(0,A.x)(),{t:y}=(0,f.B)(),[w,k]=(0,r.useState)(!1),C=M();return(0,r.useEffect)(()=>{let e=e=>{"Escape"===e.key&&w&&k(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[w]),(0,s.jsxs)("div",{className:"flex flex-col min-h-screen bg-background",children:[(0,s.jsx)(L,{onSettingsClick:()=>k(!0)}),(0,s.jsx)("main",{className:"flex-grow container mx-auto px-2 py-4 md:py-8",children:(0,s.jsxs)("div",{className:(0,d.cn)("grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 items-start",C?"flex flex-col":""),children:[!C&&(0,s.jsxs)("div",{className:"md:col-span-1 space-y-4 order-2 md:order-1",children:[(0,s.jsx)(T,{piece:l,title:y("holdPieceTitle"),onHoldActionTrigger:b,isMobile:C,canHold:i,gameState:x}),(0,s.jsx)(D,{piece:a,title:y("nextPiece")}),(0,s.jsx)(U,{score:o,level:c,linesCleared:m}),(0,s.jsx)(G,{})]}),(0,s.jsxs)("div",{className:(0,d.cn)("relative order-1 md:order-2",C?"w-full":"md:col-span-2"),children:[(0,s.jsx)(S,{board:e,currentPiece:t,ghostPiece:n,animatingRows:N}),"gameOver"===x&&!t&&(0,s.jsx)("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm z-10 rounded-lg flex flex-col items-center justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full w-full",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-primary mb-6",children:y("appName")}),(0,s.jsxs)(u,{onClick:p,size:"lg",className:"text-xl py-8 px-10 animate-pulse",children:[(0,s.jsx)(_.A,{className:"mr-2 h-6 w-6"})," ",y("play")]})]})}),"gameOver"===x&&t&&(0,s.jsx)($,{}),"paused"===x&&(0,s.jsx)("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm z-10 rounded-lg flex flex-col items-center justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full w-full",children:[(0,s.jsx)("h2",{className:"text-5xl font-bold text-primary mb-4",children:y("pauseStateTitle")}),(0,s.jsxs)(u,{onClick:g,size:"lg",className:"text-xl py-8 px-10",children:[(0,s.jsx)(_.A,{className:"mr-2 h-6 w-6"})," ",y("resume")]})]})}),j&&(0,s.jsx)(eK,{animationType:"levelUp"},"levelup-confetti"),v&&(0,s.jsx)(eK,{animationType:"lineClear"},"lineclear-confetti"),C&&"playing"===x&&(0,s.jsx)(K,{})]}),C&&(0,s.jsx)("div",{className:"mt-4 space-y-3 order-2 w-full",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsx)(T,{piece:l,title:y("holdPieceTitle"),onHoldActionTrigger:b,isMobile:C,canHold:i,gameState:x}),(0,s.jsx)(D,{piece:a,title:y("nextPiece")})]})})]})}),(0,s.jsx)(eG,{isOpen:w,onClose:()=>k(!1)}),(0,s.jsx)("footer",{className:"py-4 text-center text-sm text-muted-foreground border-t",children:"EmojiTetriz - Built with Next.js and Firebase Studio."})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[965,657,29,441,684,358],()=>t(6403)),_N_E=e.O()}]);